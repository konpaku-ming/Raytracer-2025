![](./doc/assets/image-raytracing.png)

# Summer-Ray-Tracer

> SJTU ACM Honors Class 2025 Ray Tracer Project with Rust!

**Before you start, please read this README carefully**, and there is no useless information in this document.

### Introduction

Briefly, you need to build a toy ray tracer in this project with the Rust language.

### Where can you Learn about Ray Tracing?

Our project is based on the [***Ray Tracing In One Weekend***](https://raytracing.github.io/) book series, containing three books, which is a great resource for beginners to learn about ray tracing.

Most of your jobs are just reading and trying to understand the books, and implementing the books' C++ code in Rust. (That sounds so easy, right?)

### Quick Start

#### Rust Installation
Rust is a modern programming language with a convenient version control tool called `rustup` and a powerful package manager called `cargo`. Simply follow the instructions on [Rust official website](https://www.rust-lang.org/tools/install) for their installation. You may also use Rust IDEs (we recommend [RustRover](https://www.jetbrains.com/rust/)) to manage your Rust projects.

#### The First Output
We have already implemented the first image output of the first book in `main.rs`, so you can just run the following commands to see the first output image (or simply click the `Run` button in your IDE):
- `cargo run`

This will automatically set up the environment and compile the code, then run the ray tracer to generate the first image in `output/book1/image1.png`.

#### GitHub Actions
You need to share your code on GitHub, and we will use GitHub Actions to automatically run your code and generate the output images for checking. You can find the configuration file in `.github/workflows/run.yml`. This file will be automatically executed when you push your code onto GitHub with an arbitrary tag.

Following are instructions on how to create a tag, push your code, and see the result in GitHub Actions (we use RustRover as an example):
![Create a tag for a local commit](./doc/assets/add_tag.png)
![Push the code together with the tag](./doc/assets/push_tag.png)
![GitHub Actions page](./doc/assets/github_actions.png)
![Download the output images](./doc/assets/download_output.png)

### The Framework of the Project
```
.
├── Cargo.lock
├── Cargo.toml
├── doc
├── .github
│   └── workflows
│       └── run.yml
├── .gitignore
├── LICENSE
├── output
│   ├── book1
│   │   └── image1.jpg
│   ├── book2
│   ├── book3
│   └── works
├── src
│   └── main.rs
├── assets
├── README.md
└── rust-toolchain.toml
```

We strongly recommend you to keep this framework to build your project, as you can see, this framework is already simple enough, and you can add your own code in the `src` folder.

- `doc`: A folder to contain your report
- `output`: A folder to contain your output images
  - Each book has its own folder, which contains all the images shown in the chapters but should be generated by your own ray tracer
  - This folder should not be uploaded to `Github`, as it may be too large or change too frequently, so it should be added to `.gitignore`
- `.github/workflows/run.yml`: This file is used to run your code in `Github Actions`, which is a CI/CD tool.
  By the way, `output` folder can be generated automatically by `Github Actions`.
- `src`: This folder contains you main code
- `assets`: If you want to import some 3D models or textures, you can put them in this folder
- `rust-toolchain.toml`: Specify the Rust version for your project. Do not forget to add this file to your project, or you may not be able to compile your code

### Rust Language

#### Grammar Study

This is probably your first time to use Rust, so there are some resources for you to learn Rust:

- [*Rust Programming Language*](https://doc.rust-lang.org/book/title-page.html) is the most used book for a beginner
  - [*Rust 程序设计语言 简体中文版*](https://kaisery.github.io/trpl-zh-cn/title-page.html), the Chinese translation
- [*Rust 语言圣经*](https://course.rs/about-book.html)
- [*The Cargo Book*](https://doc.rust-lang.org/cargo/index.html)
- [*Rust By Example*](https://doc.rust-lang.org/rust-by-example/index.html)
- [*Rust Nomicon*](https://doc.rust-lang.org/nomicon/index.html) is for advanced users. E.g. you can learn how to write unsafe code in Rust

#### Something you should know about Rust

- `Module` instead of `include`
- `Trait` instead of `inheritance`
- Syntactically similar to C++
- Well designed, ensuring memory safe without garbage collection
- Strict compile-time check
- Ownership, lifetime, borrow checker, smart pointers...
- Hard to learn...

### Tasks

#### Task 0: Preparation

Just do some preparation work, including:

- Read the **README** carefully, so that you know how to start your project
- Correctly install Rust and Cargo
- Figure out how to compile rust code, using `rustc` or `cargo`
- Learning Rust language. Read a few chapters of the `Rust Programming Language` book
    - The first 6 chapters are enough for you to start your project
    - Chapter 10, 15, 16... the more, the better
    - Maybe at first you just know how to write a `Hello World` program or how to output the first image in the book, as long as you can complete the current task, it is enough

#### Task 1 (20 pts): *Ray Tracing In One Weekend*

- Complete [the first book](https://raytracing.github.io/books/RayTracingInOneWeekend.html)
- Save each output image in the `output` folder

#### Task 2 (20 pts) : *Ray Tracing: The Next Week*

- Complete [the second book](https://raytracing.github.io/books/RayTracingTheNextWeek.html)
- Save each output image in the `output` folder.

#### Task 3 (20 pts) : *Ray Tracing: The Rest of Your Life*

- Complete [the third book](https://raytracing.github.io/books/RayTracingTheRestOfYourLife.html)
- Save each output image in the `output` folder

- Write a simple report about the PDF method in this book, at least 2 pages

#### Task 4 (20 pts): Advanced features

- Multi-threading to accelerate your ray tracer (strongly recommended)
- Make a benchmark for your ray tracer
- Support for `.obj` file
  - An `obj-loader` is needed
  - Polygons are supported (optional)
- CG-related techniques
  - Edge detection, normal mapping, interpolation, texture mapping, rasterization, etc.
  - Lens flare, depth of field, axis shift, exposure, etc.
  - Read interesting books(e.g. 《Unity Shader 入门精要》) and implement other fancy features
- Exploring some [Rust features](./doc/rust-bonus.md)
- Some other interesting features. Please contact TAs if you have any ideas
- You can refer to [artworks in raytracer-2022](./doc/artworks-2022.md)

#### Task 5 (10 pts): Final scene

- Complete a final scene, which should be more complex than the scenes in the books. If your work looks pretty or has aesthetic value, you will get extra points
- Or, your final scene can just be a banner or a logo of our project `Ray Tracing`. Look at the current banner at the top of this page, you can make a better one, with your own ray tracer

#### Task 6 (10 pts): Code review

### Basic Requirements
- Pass the checks in `Github Actions`, including (already included in `run.yml`):
    - `cargo fmt -- --check`
    - `cargo clippy --all-targets --all-features -- -D warnings`
    - `cargo test --all-features`
    - `cargo build --release --all-features`
    - `cargo run --release`

You may run these commands locally to check your code before pushing it to GitHub.
- Each image output commit should be tagged, if tagged, `run.yml` settings will run your code and generate the output images. You should **let us directly see the output images (a '.zip' file) in the `Github Actions` page**
- You should have a document recording all the bonus you have done briefly. For each bonus, you should show the code or a benchmark of your work.

### Assignments

- For students in ACM Class:
  - You are supposed to finish all tasks above
  - Recommended timeline:
    - **Day 1:**  Task 0: Environment setup
    - **Day 2 - 3:** Task 0: Learn Rust
    - **Day 4 - 6:** Task 1
    - **Day 7 - 9:** Task 2
    - **Day 10 - 12:** Task 3
    - **Day 13 - 19:** Task 4 & 5
    - **Day 20:** Pre & Task 6

- For students in SEIEE CS:
  - You are supposed to finish `Task0`, `Task1 (40pts)`, `Task2 (40pts)`, `Task5 (10pts)` and `Task6 (10pts)`
  - Recommended timeline:
    - **Day 1:**  Task 0: Environment setup
    - **Day 2 - 3:** Task 0: Learn Rust
    - **Day 4 - 6:** Task 1 & 5
    - **Day 7 - 9:** Task 2 & 5
    - **Day 10:** Pre & Task 6

### More Tips
- You may run `cargo fmt` to format your code locally before pushing it to GitHub.
- You may need to use `cargo run --release` to accelerate the precedure.
- There is no restriction on unsafe code, if you think it is necessary, you can use it, and explain why you need it in code review.
- There will be 2 students to do presentations for ACM Class and SEIEE CS. They will get extra points based on their presentations, no more than 10 points.
